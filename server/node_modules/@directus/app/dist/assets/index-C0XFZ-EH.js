import{T as Se,w as Ve,a as De,v as Pe}from"./vue.runtime.esm-bundler-BY4gCD-H.js";import{w as ze,u as Ne,x as Te,_ as R,y as he,z as re,A as be,M as He,B as _e,C as Ge,D as Ze,E as Ke,F as Qe,G as Ye,H as Je,I as Xe,S as et,J as tt,K as We,L as nt,N as ot,O as st,P as at,Q as lt,R as it,V as Ie,T as rt}from"./index.B9Ati0hC.entry.js";import{r as ut,u as ct,m as dt,a as vt,b as _t,d as mt}from"./index-C7SojNBq.js";import{storeToRefs as ie}from"./pinia.ZGOsqJmi.entry.js";import{useI18n as ae}from"./vue-i18n.DFZ7pSsC.entry.js";import{useRoute as pt,useRouter as Ue}from"./vue-router.BocT7zdJ.entry.js";import{e as j,c as S,f as V,bj as Ce,w as oe,b5 as p,b6 as Y,by as A,aY as s,ad as h,bw as a,af as C,I as Q,y as r,ae as B,ag as T,aN as F,b7 as Ee,u as c,ak as L,bf as D,b3 as se,aF as Oe,b4 as K,aM as ft,n as gt,p as ht,ai as bt,aO as yt,ax as wt,a$ as kt,aZ as $t}from"./runtime-core.esm-bundler-zlSgKseS.js";const St=["src"],Nt=j({__name:"module-bar-logo",setup(l){const{t:e}=ae(),o=ze(),d=Ne(),t=S(()=>{var u;return d.settings===null||!((u=d.settings)!=null&&u.project_logo)?null:Te(`${d.settings.project_logo}`)}),n=V(!1),{queueHasItems:_}=Ce(o);oe(()=>_.value,u=>{u&&(n.value=!0)});const f=S(()=>{var u;return(u=d.settings)==null?void 0:u.project_url}),w=S(()=>{var u;return(u=d.settings)!=null&&u.project_url?e("view_project"):!1});function v(){_.value===!1&&(n.value=!1)}return(u,b)=>{const k=p("v-progress-linear"),y=Y("tooltip");return A((s(),h(Ee(f.value?"a":"div"),{href:f.value,target:f.value?"_blank":void 0,rel:f.value?"noopener noreferrer":void 0,class:F(["module-bar-logo",{loading:n.value}])},{default:a(()=>[t.value?(s(),C(Q,{key:0},[r(Se,{name:"fade"},{default:a(()=>[n.value?(s(),h(k,{key:0,indeterminate:"",rounded:"",onAnimationiteration:v})):B("",!0)]),_:1}),T("img",{class:"custom-logo",src:t.value,alt:"Project Logo"},null,8,St)],64)):(s(),C("div",{key:1,class:F(["logo",{running:n.value}]),onAnimationiteration:v},null,34))]),_:1},8,["href","target","rel","class"])),[[y,w.value,void 0,{right:!0}]])}}}),Ct=R(Nt,[["__scopeId","data-v-d86ce83c"]]),Mt={class:"module-bar-avatar"},xt=["src","alt"],Vt=j({__name:"module-bar-avatar",setup(l){const{t:e}=ae(),o=he(),d=re(),{notificationsDrawerOpen:t}=ie(o),{unread:n}=ie(d),_=be(),f=V(!1),w=S(()=>{var y;return!_.currentUser||!("avatar"in _.currentUser)||!((y=_.currentUser)!=null&&y.avatar)?null:Te(`${_.currentUser.avatar.id}?key=system-medium-cover`)}),v=V(null),u=S(()=>`/users/${_.currentUser.id}`),b=S(()=>"/logout"),k=_.fullName??void 0;return(y,m)=>{const W=p("v-icon"),O=p("v-button"),I=p("v-badge"),M=p("v-card-title"),G=p("v-card-actions"),J=p("v-card"),H=p("v-dialog"),X=p("v-avatar"),ee=p("router-link"),le=p("v-hover"),te=Y("tooltip");return s(),C("div",Mt,[r(I,{value:c(n),disabled:c(n)==0,class:"notifications-badge"},{default:a(()=>[A((s(),h(O,{tile:"",icon:"","x-large":"",class:"notifications",onClick:m[0]||(m[0]=z=>t.value=!0)},{default:a(()=>[r(W,{name:"notifications"})]),_:1})),[[te,c(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),r(le,null,{default:a(({hover:z})=>[r(H,{modelValue:f.value,"onUpdate:modelValue":m[2]||(m[2]=U=>f.value=U),onEsc:m[3]||(m[3]=U=>f.value=!1)},{activator:a(({on:U})=>[r(Se,{name:"sign-out"},{default:a(()=>[z?A((s(),h(O,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:U},{default:a(()=>[r(W,{name:"logout"})]),_:2},1032,["onClick"])),[[te,c(e)("sign_out"),void 0,{right:!0}]]):B("",!0)]),_:2},1024)]),default:a(()=>[r(J,null,{default:a(()=>[r(M,null,{default:a(()=>[L(D(c(e)("sign_out_confirm")),1)]),_:1}),r(G,null,{default:a(()=>[r(O,{secondary:"",onClick:m[1]||(m[1]=U=>f.value=!f.value)},{default:a(()=>[L(D(c(e)("cancel")),1)]),_:1}),r(O,{to:b.value},{default:a(()=>[L(D(c(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),r(ee,{to:u.value},{default:a(()=>[A((s(),h(X,{tile:"",large:"",class:F({"no-avatar":!w.value})},{default:a(()=>[w.value&&!v.value?(s(),C("img",{key:0,src:w.value,alt:c(k),class:"avatar-image",onError:m[4]||(m[4]=U=>v.value=U)},null,40,xt)):(s(),h(W,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[te,c(k),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}}),Wt=R(Vt,[["__scopeId","data-v-f9f544dc"]]),It={class:"module-bar"},Bt={class:"modules"},Dt=j({__name:"module-bar",setup(l){const e=Ne(),{modules:o}=Ze(),d=S(()=>o.value.map(n=>n.id)),t=S(()=>e.settings?(e.settings.module_bar??He).filter(n=>n.type==="link"?!0:n.enabled&&d.value.includes(n.id)).map(n=>{if(n.type==="link"){const f=_e.omit(n,["url"]);return n.url.startsWith("/")?f.to=n.url:f.href=n.url,Ge(f)}const _=o.value.find(f=>f.id===n.id);return{...n,...o.value.find(f=>f.id===n.id),to:`/${_.id}`}}):[]);return(n,_)=>{const f=p("v-icon"),w=p("v-button"),v=Y("tooltip");return s(),C("div",It,[r(Ct),T("div",Bt,[(s(!0),C(Q,null,se(t.value,u=>A((s(),h(w,{key:u.id,icon:"","x-large":"",to:u.to,href:u.href,tile:""},{default:a(()=>[r(f,{name:u.icon},null,8,["name"])]),_:2},1032,["to","href"])),[[v,u.name,void 0,{right:!0}]])),128))]),r(Wt)])}}}),Tt=R(Dt,[["__scopeId","data-v-572954c3"]]),Ut={class:"notification-dialogs"},Et=["href"],Ot=j({__name:"notification-dialogs",setup(l){const{t:e}=ae(),o=re(),{isAdmin:d,currentUser:t}=be(),{settings:n}=ie(Ne()),_=S(()=>o.dialogs);function f(v){var k,y,m;if(!((k=n.value)!=null&&k.report_error_url))return Ke;const u=pt(),b={error:{name:v==null?void 0:v.name,message:v==null?void 0:v.message},route:{fullPath:u.fullPath,hash:u.hash,name:u.name,path:u.path,query:u.query},navigator:{language:navigator.language,userAgent:navigator.userAgent},user:{},role:{}};return t!==null&&"id"in t&&(b.user={id:t.id,first_name:t.first_name,last_name:t.last_name,title:t.title,description:t.description,location:t.location,status:t.status},b.role={id:(y=t.role)==null?void 0:y.id,name:(m=t.role)==null?void 0:m.name}),ut(n.value.report_error_url,b)}const w=async v=>{v.dismissAction&&await v.dismissAction(),o.remove(v.id)};return(v,u)=>{const b=p("v-card-title"),k=p("v-error"),y=p("v-card-text"),m=p("v-button"),W=p("v-card-actions"),O=p("v-card"),I=p("v-dialog");return s(),C("div",Ut,[(s(!0),C(Q,null,se(_.value,M=>(s(),h(I,{key:M.id,"model-value":"",persist:""},{default:a(()=>[r(O,{class:F([M.type])},{default:a(()=>[r(b,null,{default:a(()=>[L(D(M.title),1)]),_:2},1024),M.text||M.error?(s(),h(y,{key:0},{default:a(()=>[L(D(M.text)+" ",1),M.error?(s(),h(k,{key:0,error:M.error},null,8,["error"])):B("",!0)]),_:2},1024)):B("",!0),r(W,null,{default:a(()=>[M.type==="error"&&c(d)&&M.code==="UNKNOWN"?(s(),h(m,{key:0,secondary:""},{default:a(()=>[T("a",{target:"_blank",href:f(M.error)},D(c(e)("report_error")),9,Et)]),_:2},1024)):B("",!0),r(m,{onClick:G=>w(M)},{default:a(()=>[L(D(M.dismissText??c(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}}),Lt=R(Ot,[["__scopeId","data-v-8f4b67f7"]]),At={key:0,class:"item-count"},Ft={key:1,class:"content"},Rt=["onClick"],jt={key:0,class:"message"},qt=j({__name:"notifications-drawer",setup(l){const{t:e,n:o}=ae(),d=he(),t=be(),n=Qe(),_=re(),f=Ue(),w=V(null),v=V([]),u=V(["inbox"]),b=V([]),k=V(1),y=V(25),m=V(null),W=V(null),O=V(null),{notificationsDrawerOpen:I}=ie(d);oe(u,(N,x)=>{N[0]!==x[0]&&(v.value=[])}),oe(I,N=>{w.value=N?"directus_notifications":null});const M=S(()=>({_and:[{recipient:{_eq:t.currentUser.id}},{status:{_eq:u.value[0]}}]})),{items:G,loading:J,totalPages:H,totalCount:X,itemCount:ee,getItems:le,getItemCount:te,getTotalCount:z}=ct(w,{filter:S(()=>dt(W.value,M.value)),filterSystem:M,fields:V(["id","subject","message","collection","item","timestamp"]),sort:V(["-timestamp"]),search:m,limit:y,page:k}),U=S(()=>G.value.map(N=>{var i;let x;if(N.collection){const g=n.getCollection(N.collection);(i=g==null?void 0:g.meta)!=null&&i.singleton||!N.item?x=Ye(N.collection):x=Je(N.collection,N.item)}else String(N.item).startsWith("/")&&(x=String(N.item));return{...N,to:x}})),me=S(()=>{if(!(!X.value||!ee.value))return Xe({currentItems:ee.value,currentPage:k.value,perPage:y.value,isFiltered:!!W.value,totalItems:X.value,i18n:{t:e,n:o}})});async function pe(){await le(),await z(),await te()}async function ue(){await We.patch("/notifications",{query:{filter:{_and:[{recipient:{_eq:t.currentUser.id}},{status:{_eq:"inbox"}}]}},data:{status:"archived"}}),await pe(),_.setUnreadCount(0)}function P(N){v.value.includes(N)?v.value.splice(v.value.indexOf(N),1):v.value.push(N)}function ce(N){b.value.includes(N)?b.value.splice(b.value.indexOf(N),1):b.value.push(N)}async function ye(){await We.patch("/notifications",{keys:v.value,data:{status:u.value[0]==="inbox"?"archived":"inbox"}}),await pe(),await _.refreshUnreadCount(),v.value=[]}function we(N){f.push(N),I.value=!1}function fe(){W.value=null,m.value=null}return(N,x)=>{const i=p("v-icon"),g=p("v-button"),q=p("v-list-item-icon"),ne=p("v-list-item-content"),de=p("v-tab"),E=p("v-tabs"),ve=p("v-info"),ke=p("v-skeleton-loader"),Me=p("v-list"),Ae=p("v-checkbox"),xe=p("v-text-overflow"),Fe=p("v-list-item"),Re=p("v-pagination"),je=p("v-drawer"),$e=Y("tooltip"),qe=Y("md");return s(),h(je,{modelValue:c(I),"onUpdate:modelValue":x[5]||(x[5]=$=>Oe(I)?I.value=$:null),icon:"notifications",title:c(e)("notifications"),"sidebar-label":c(e)("folders"),onCancel:x[6]||(x[6]=$=>I.value=!1)},{"actions:prepend":a(()=>[r(Se,{name:"fade"},{default:a(()=>[me.value?(s(),C("span",At,D(me.value),1)):B("",!0)]),_:1})]),actions:a(()=>[r(et,{modelValue:m.value,"onUpdate:modelValue":x[0]||(x[0]=$=>m.value=$),filter:W.value,"onUpdate:filter":x[1]||(x[1]=$=>W.value=$),collection:"directus_notifications"},null,8,["modelValue","filter"]),A((s(),h(g,{icon:"",rounded:"",disabled:v.value.length===0,secondary:"",onClick:ye},{default:a(()=>[r(i,{name:u.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[$e,u.value[0]==="inbox"?c(e)("archive"):c(e)("unarchive"),void 0,{bottom:!0}]]),u.value[0]==="inbox"?A((s(),h(g,{key:0,icon:"",rounded:"",disabled:U.value.length===0,onClick:ue},{default:a(()=>[r(i,{name:"done_all"})]),_:1},8,["disabled"])),[[$e,c(e)("archive_all"),void 0,{bottom:!0}]]):B("",!0)]),sidebar:a(()=>[r(E,{modelValue:u.value,"onUpdate:modelValue":x[2]||(x[2]=$=>u.value=$),vertical:""},{default:a(()=>[r(de,{value:"inbox"},{default:a(()=>[r(q,null,{default:a(()=>[r(i,{name:"inbox"})]),_:1}),r(ne,null,{default:a(()=>[L(D(c(e)("inbox")),1)]),_:1})]),_:1}),r(de,{value:"archived"},{default:a(()=>[r(q,null,{default:a(()=>[r(i,{name:"archive"})]),_:1}),r(ne,null,{default:a(()=>[L(D(c(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:a(()=>[!c(J)&&!c(ee)?(s(),C(Q,{key:0},[W.value||m.value?(s(),h(ve,{key:0,title:c(e)("no_results"),icon:"search",center:""},{append:a(()=>[r(g,{onClick:fe},{default:a(()=>[L(D(c(e)("clear_filters")),1)]),_:1})]),default:a(()=>[L(D(c(e)("no_results_copy"))+" ",1)]),_:1},8,["title"])):(s(),h(ve,{key:1,icon:"notifications",title:c(e)("no_notifications"),center:""},{default:a(()=>[L(D(c(e)("no_notifications_copy")),1)]),_:1},8,["title"]))],64)):(s(),C("div",Ft,[c(J)?(s(),h(Me,{key:0,class:"notifications"},{default:a(()=>[(s(),C(Q,null,se(10,$=>r(ke,{key:$,class:F({dense:c(H)>1})},null,8,["class"])),64))]),_:1})):(s(),h(Me,{key:1,class:"notifications"},{default:a(()=>[(s(!0),C(Q,null,se(U.value,$=>(s(),h(Fe,{key:$.id,block:"",dense:c(H)>1,clickable:!!$.message,onMousedown:x[3]||(x[3]=Ve(({target:Z})=>O.value=Z,["left","self"])),onMouseup:Ve(({target:Z})=>{Z===O.value&&ce($.id),O.value=null},["left","self"])},{default:a(()=>[T("div",{class:"header",onClick:Z=>ce($.id)},[r(Ae,{"model-value":v.value.includes($.id),"onUpdate:modelValue":Z=>P($.id)},null,8,["model-value","onUpdate:modelValue"]),r(xe,{class:"title",highlight:m.value,text:$.subject},null,8,["highlight","text"]),r(tt,{value:$.timestamp,type:"timestamp",relative:""},{default:a(({datetime:Z})=>[r(xe,{class:"datetime",text:Z},null,8,["text"])]),_:2},1032,["value"]),$.to?A((s(),h(i,{key:0,clickable:"",name:"open_in_new",onClick:Z=>we($.to)},null,8,["onClick"])),[[$e,c(e)("goto_collection_content")]]):B("",!0),$.message?(s(),h(i,{key:1,clickable:"",name:b.value.includes($.id)?"expand_less":"expand_more"},null,8,["name"])):B("",!0)],8,Rt),b.value.includes($.id)&&$.message?A((s(),C("div",jt,null,512)),[[qe,$.message]]):B("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})),c(H)>1?(s(),h(Re,{key:2,modelValue:k.value,"onUpdate:modelValue":x[4]||(x[4]=$=>k.value=$),"total-visible":5,length:c(H)},null,8,["modelValue","length"])):B("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}}),Pt=R(qt,[["__scopeId","data-v-3a98573c"]]),zt={key:0,class:"icon"},Ht={class:"content"},Gt={class:"title selectable"},Zt={key:0,class:"text selectable"},Kt=j({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{},alwaysShowText:{type:Boolean},dismissText:{},dismissIcon:{},dismissAction:{}},setup(l){const e=l,o=re(),d=async()=>{e.showClose===!0&&(e.dismissAction&&await e.dismissAction(),o.remove(e.id))};return(t,n)=>{const _=p("v-progress-circular"),f=p("v-icon"),w=Y("tooltip");return s(),C("div",{class:F(["notification-item",[t.type,{tail:t.tail,dense:t.dense,"show-text":t.alwaysShowText}]]),onClick:d},[t.loading||t.progress||t.icon?(s(),C("div",zt,[t.loading?(s(),h(_,{key:0,indeterminate:"",small:""})):t.progress?(s(),h(_,{key:1,small:"",value:t.progress},null,8,["value"])):(s(),h(f,{key:2,name:t.icon},null,8,["name"]))])):B("",!0),T("div",Ht,[T("p",Gt,D(t.title),1),t.text?(s(),C("p",Zt,D(t.text),1)):B("",!0)]),t.showClose?A((s(),h(f,{key:1,name:t.dismissIcon??"close",clickable:"",class:"close",onClick:d},null,8,["name"])),[[w,t.dismissText]]):B("",!0)],2)}}}),Le=R(Kt,[["__scopeId","data-v-efae6d48"]]),Qt=j({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(l){const e=re(),o=Ce(e).queue;return(d,t)=>(s(),h(De,{class:F(["notifications-group",{"sidebar-open":d.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:a(()=>[K(d.$slots,"default",{},void 0,!0),(s(!0),C(Q,null,se(c(o),(n,_)=>(s(),h(Le,{id:n.id,key:n.id,title:n.title,text:n.text,icon:n.icon,type:n.type,loading:n.loading,progress:n.progress,tail:_===c(o).length-1,dense:d.sidebarOpen===!1,"show-close":n.persist===!0&&n.closeable!==!1,"always-show-text":n.alwaysShowText,"dismiss-icon":n.dismissIcon,"dismiss-text":n.dismissText,"dismiss-action":n.dismissAction},null,8,["id","title","text","icon","type","loading","progress","tail","dense","show-close","always-show-text","dismiss-icon","dismiss-text","dismiss-action"]))),128))]),_:3},8,["class"]))}}),Yt=R(Qt,[["__scopeId","data-v-f0dfbda2"]]),Jt={class:"icon"},Xt={key:0,class:"title"},en=j({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(l){const e=he(),{sidebarOpen:o}=Ce(e);return(d,t)=>{const n=p("v-icon");return s(),h(Ee(d.to?"router-link":"button"),{class:F(["sidebar-button",{active:d.active}]),onClick:t[0]||(t[0]=_=>d.$emit("click",_))},{default:a(()=>[T("div",Jt,[r(n,{name:d.icon},null,8,["name"])]),c(o)?(s(),C("div",Xt,[K(d.$slots,"default",{},void 0,!0)])):B("",!0)]),_:3},8,["class"])}}}),tn=R(en,[["__scopeId","data-v-3acfa986"]]),nn={class:"notifications-preview"},on={key:0,class:"inline"},sn={class:"padding-box"},an=j({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(l){const{t:e}=ae(),o=re(),{lastFour:d}=ie(o);return(t,n)=>{const _=p("router-link"),f=p("transition-expand"),w=Y("tooltip");return s(),C("div",nn,[r(f,{tag:"div"},{default:a(()=>[t.modelValue?(s(),C("div",on,[T("div",sn,[r(_,{class:F(["link",{"has-items":c(d).length>0}]),to:"/activity"},{default:a(()=>[L(D(c(e)("show_all_activity")),1)]),_:1},8,["class"]),r(De,{tag:"div",name:"notification",class:"transition"},{default:a(()=>[(s(!0),C(Q,null,se(c(d),v=>(s(),h(Le,ft({key:v.id,ref_for:!0},v),null,16))),128))]),_:1})])])):B("",!0)]),_:1}),A((s(),h(tn,{active:t.modelValue,class:"toggle",icon:"pending_actions",onClick:n[0]||(n[0]=v=>t.$emit("update:modelValue",!t.modelValue))},{default:a(()=>[L(D(c(e)("activity_log")),1)]),_:1},8,["active"])),[[w,!t.sidebarOpen&&c(e)("activity_log"),void 0,{left:!0}]])])}}}),ln=R(an,[["__scopeId","data-v-63e60302"]]),Be=l=>Number.isFinite(l)?l:0;function rn(l){return{days:Math.trunc(l/864e5),hours:Math.trunc(l/36e5%24),minutes:Math.trunc(l/6e4%60),seconds:Math.trunc(l/1e3%60),milliseconds:Math.trunc(l%1e3),microseconds:Math.trunc(Be(l*1e3)%1e3),nanoseconds:Math.trunc(Be(l*1e6)%1e3)}}function un(l){return{days:l/86400000n,hours:l/3600000n%24n,minutes:l/60000n%60n,seconds:l/1000n%60n,milliseconds:l%1000n,microseconds:0n,nanoseconds:0n}}function cn(l){switch(typeof l){case"number":{if(Number.isFinite(l))return rn(l);break}case"bigint":return un(l)}throw new TypeError("Expected a finite number or bigint")}const dn=l=>l===0||l===0n,vn=(l,e)=>e===1||e===1n?l:`${l}s`,_n=1e-7,mn=24n*60n*60n*1000n;function ge(l,e){const o=typeof l=="bigint";if(!o&&!Number.isFinite(l))throw new TypeError("Expected a finite number or bigint");e={...e};const d=l<0?"-":"";l=l<0?-l:l,e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.unitCount=1,e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);let t=[];const n=(u,b)=>{const k=Math.floor(u*10**b+_n);return(Math.round(k)/10**b).toFixed(b)},_=(u,b,k,y)=>{if(!((t.length===0||!e.colonNotation)&&dn(u)&&!(e.colonNotation&&k==="m"))){if(y??(y=String(u)),e.colonNotation){const m=y.includes(".")?y.split(".")[0].length:y.length,W=t.length>0?2:1;y="0".repeat(Math.max(0,W-m))+y}else y+=e.verbose?" "+vn(b,u):k;t.push(y)}},f=cn(l),w=BigInt(f.days);if(_(w/365n,"year","y"),_(w%365n,"day","d"),_(Number(f.hours),"hour","h"),_(Number(f.minutes),"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&l<1e3){const u=Number(f.seconds),b=Number(f.milliseconds),k=Number(f.microseconds),y=Number(f.nanoseconds);if(_(u,"second","s"),e.formatSubMilliseconds)_(b,"millisecond","ms"),_(k,"microsecond","Âµs"),_(y,"nanosecond","ns");else{const m=b+k/1e3+y/1e6,W=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,O=m>=1?Math.round(m):Math.ceil(m),I=W?m.toFixed(W):O;_(Number.parseFloat(I),"millisecond","ms",I)}}else{const u=(o?Number(l%mn):l)/1e3%60,b=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,k=n(u,b),y=e.keepDecimalsOnWholeSeconds?k:k.replace(/\.0+$/,"");_(Number.parseFloat(y),"second","s",y)}if(t.length===0)return d+"0"+(e.verbose?" milliseconds":"ms");const v=e.colonNotation?":":" ";return typeof e.unitCount=="number"&&(t=t.slice(0,Math.max(e.unitCount,1))),d+t.join(v)}const pn={class:"latency-indicator"},fn=j({__name:"latency-indicator",setup(l){const{t:e}=ae(),o=nt(),d=S(()=>{const w=_e.sortBy(o.latency,["timestamp"]);return w[w.length-1]}),t=S(()=>{if(!o.latency||o.latency.length===0)return 0;const w=_e.sortBy(o.latency,["timestamp"]),v=w.slice(Math.max(w.length-5,0));let u=0;for(const{latency:b}of v)u+=b;return Math.round(u/v.length)}),n=S(()=>t.value<=250?4:t.value>250&&t.value<=500?3:t.value>500&&t.value<=750?2:1),_=S(()=>{switch(n.value){case 4:return`${e("connection_excellent")}
(${ge(t.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${ge(t.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${ge(t.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${ge(t.value)} ${e("latency")})`;default:return null}}),f=S(()=>{switch(n.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(w,v)=>{const u=p("v-progress-circular"),b=p("v-icon"),k=Y("tooltip");return A((s(),C("div",pn,[d.value?(s(),h(b,{key:1,name:f.value},null,8,["name"])):(s(),h(u,{key:0,indeterminate:""}))])),[[k,_.value,void 0,{bottom:!0,end:!0}]])}}}),gn=R(fn,[["__scopeId","data-v-93933dfa"]]),hn={class:"project-info"},bn={class:"name-container"},yn=j({__name:"project-info",setup(l){const e=ot(),o=S(()=>{var t,n;return(n=(t=e.info)==null?void 0:t.project)==null?void 0:n.project_name}),d=S(()=>{var t,n;return(n=(t=e.info)==null?void 0:t.project)==null?void 0:n.project_descriptor});return(t,n)=>{const _=p("v-text-overflow");return s(),C("div",hn,[r(gn),T("div",bn,[r(_,{placement:"right",class:"name",text:o.value},null,8,["text"]),d.value?(s(),h(_,{key:0,placement:"right",class:"descriptor",text:d.value},null,8,["text"])):B("",!0)])])}}}),wn=R(yn,[["__scopeId","data-v-142557c9"]]),kn=j({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(l){const e=l,o=st("sidebar-open-detail",[]),d=V(!1);return oe(()=>e.sidebarOpen,async t=>{t===!1?o.value=[]:(d.value=!0,await gt(),d.value=!1)}),(t,n)=>{const _=p("v-item-group");return s(),h(_,{modelValue:c(o),"onUpdate:modelValue":n[0]||(n[0]=f=>Oe(o)?o.value=f:null),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:d.value},{default:a(()=>[K(t.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}}),$n=R(kn,[["__scopeId","data-v-abc8855b"]]),Sn=l=>(kt("data-v-678d6a4d"),l=l(),$t(),l),Nn={class:"module-nav alt-colors"},Cn={class:"module-nav-content"},Mn={class:"content-wrapper"},xn={class:"flex-container"},Vn=Sn(()=>T("div",{class:"spacer"},null,-1)),Wn=j({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(l,{emit:e}){var N,x;const o={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},d=l,t=e,{t:n}=ae(),_=Ue(),f=S(()=>d.title??null),w=vt(d,"splitView",t),v=V(),u=V(),b=V();let k;const y=()=>{var i;clearTimeout(k),(i=v.value)==null||i.classList.remove("hide-overflow-x")};oe(w,()=>{if(!v.value||!u.value)return;v.value.classList.add("hide-overflow-x","hide-overflow-y"),k=setTimeout(y,1500);let i,g;const q=()=>{var ne;clearTimeout(i),g==null||g(),(ne=v.value)==null||ne.classList.remove("hide-overflow-y")};i=setTimeout(q,1500),g=at(u.value,"transitionend",q)});const{width:m}=lt(),{width:W}=_t(b),O=S(()=>{if(!w.value)return!0;let i;return m.value>=1260?i=m.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-W.value:m.value>=960?i=m.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-o.collapsedSidebarWidth:i=m.value-o.minContentWidth,i>=d.splitViewMinWidth}),{data:I}=it("module-width",{}),M=V(fe((N=I.value)==null?void 0:N.nav,o.minModuleNavWidth));oe(M,_e.debounce(i=>{I.value={...I.value??{},nav:i}},300));const G=V(fe((x=I.value)==null?void 0:x.main,o.minContentWidth));oe(G,_e.debounce(i=>{I.value={...I.value??{},main:i}},300));const J=V(!1),H=S(()=>{const i=w.value?d.splitViewMinWidth:0,g=O.value?o.minContentWidth+i:o.minContentWidth;let q;return m.value>=1260?q=m.value-o.moduleBarWidth-g-W.value:m.value>=960?q=m.value-o.moduleBarWidth-g-o.collapsedSidebarWidth:q=m.value-o.moduleBarWidth+o.overlaySpace,Math.max(q,o.minModuleNavWidth)}),X=S(()=>{const i=w.value?d.splitViewMinWidth:0;let g;return m.value>=1260?g=m.value-o.moduleBarWidth-M.value-i-W.value:m.value>=960?g=m.value-o.moduleBarWidth-M.value-i-o.collapsedSidebarWidth:g=m.value-i,Math.max(g,o.minContentWidth)}),ee=S(()=>({snapZones:[{width:40,snapPos:o.minModuleNavWidth,direction:"left"},{width:40,snapPos:H.value,direction:"right"}]})),le=V(!1),te=S(()=>({snapZones:[{width:40,snapPos:o.minContentWidth,direction:"left"},{width:40,snapPos:X.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:J.value})),z=V(!1),U=be(),me=he(),pe=S(()=>{var i;return U.currentUser?((i=U.currentUser)==null?void 0:i.app_access)||!1:!0}),ue=V(!1),{sidebarOpen:P,fullScreen:ce}=ie(me),ye=S(()=>U.currentUser&&"appearance"in U.currentUser?U.currentUser.appearance:"auto");ht("main-element",v),_.afterEach(()=>{var i;(i=v.value)==null||i.scrollTo({top:0}),ce.value=!1}),mt({title:f});function we(i){i.target&&i.target.classList.contains("close")===!1&&(P.value=!0)}function fe(i,g){return i&&!Number.isNaN(i)?Number(i):g}return(i,g)=>{const q=p("v-button"),ne=p("v-info"),de=p("v-overlay");return pe.value===!1?(s(),h(ne,{key:0,center:"",title:c(n)("no_app_access"),type:"danger",icon:"block"},{append:a(()=>[r(q,{to:"/logout"},{default:a(()=>[L(D(c(n)("switch_user")),1)]),_:1})]),default:a(()=>[L(D(c(n)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(s(),C("div",{key:1,class:F(["private-view",{appearance:ye.value,"full-screen":c(ce),splitView:i.splitView}])},[T("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:F({"is-open":z.value,"has-shadow":i.sidebarShadow})},[r(Tt),r(Ie,{width:M.value,"onUpdate:width":g[0]||(g[0]=E=>M.value=E),"min-width":o.minModuleNavWidth,"max-width":H.value,options:ee.value,onDragging:g[1]||(g[1]=E=>J.value=E),onTransitionEnd:y},{default:a(()=>[T("div",Nn,[r(wn),T("div",Cn,[K(i.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),T("div",{id:"main-content",ref_key:"contentEl",ref:v,class:"content"},[r(rt,{ref_key:"headerBarEl",ref:u,small:i.smallHeader||i.splitView,shadow:i.headerShadow||i.splitView,"show-sidebar-toggle":"",title:i.title,"onToggle:sidebar":g[2]||(g[2]=E=>P.value=!c(P)),onPrimary:g[3]||(g[3]=E=>z.value=!z.value)},bt({_:2},[se(i.$slots,(E,ve)=>({name:ve,fn:a(ke=>[K(i.$slots,ve,yt(wt(ke)),void 0,!0)])}))]),1032,["small","shadow","title"]),T("div",Mn,[r(Ie,{width:G.value,"onUpdate:width":g[4]||(g[4]=E=>G.value=E),"min-width":o.minContentWidth,"max-width":X.value,disabled:!c(w),options:te.value,onDragging:g[5]||(g[5]=E=>le.value=E)},{default:a(()=>[A(T("main",null,[K(i.$slots,"default",{},void 0,!0)],512),[[Pe,O.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),i.splitView?(s(),C("div",{key:0,id:"split-content",class:F({"is-dragging":le.value})},[K(i.$slots,"splitView",{},void 0,!0)],2)):B("",!0)])],512),T("aside",{id:"sidebar",ref_key:"sidebarEl",ref:b,role:"contentinfo",class:F(["alt-colors",{"is-open":c(P),"has-shadow":i.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:we},[T("div",xn,[r($n,{"sidebar-open":c(P)},{default:a(()=>[K(i.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),Vn,r(ln,{modelValue:ue.value,"onUpdate:modelValue":g[6]||(g[6]=E=>ue.value=E),"sidebar-open":c(P)},null,8,["modelValue","sidebar-open"])])],2),r(de,{class:"nav-overlay",active:z.value,onClick:g[7]||(g[7]=E=>z.value=!1)},null,8,["active"]),r(de,{class:"sidebar-overlay",active:c(P),onClick:g[8]||(g[8]=E=>P.value=!1)},null,8,["active"]),r(Pt),ue.value===!1?(s(),h(Yt,{key:0,"sidebar-open":c(P)},null,8,["sidebar-open"])):B("",!0),r(Lt)],2))}}}),Ln=R(Wn,[["__scopeId","data-v-678d6a4d"]]);export{Ln as PrivateView,Ln as default};
